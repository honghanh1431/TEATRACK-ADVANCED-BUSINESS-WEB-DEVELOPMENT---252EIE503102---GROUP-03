<main>
  <div class="container">

    <section class="hero">
      <!-- HERO TOP -->
      <div class="hero-top">
        <div class="swiper mySwiper" #heroSwiper>
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <a routerLink="/blog/blog_2">
                <img src="assets/images/banner1.png" alt="Banner 1" />
              </a>
            </div>
            <div class="swiper-slide">
              <a routerLink="/blog/blog_4">
                <img src="assets/images/banner2.jpeg" alt="Banner 2" />
              </a>
            </div>
            <div class="swiper-slide">
              <a routerLink="/blog/blog_7">
                <img src="assets/images/banner3.jpeg" alt="Banner 3" />
              </a>
            </div>
          </div>
          <div class="swiper-pagination"></div>
        </div>
      </div>

      <!-- HERO BOTTOM -->
      <div class="hero-bottom">
        <section class="drink-section">
          <h2 class="drink-title">CÁC LOẠI THỨC UỐNG CỦA CHÚNG TÔI</h2>
          <div class="underline"></div>

          <div class="drink-list">
            <div class="drink-item" (click)="openDrinksModal('Loại Thuần Trà')">
              <img src="assets/images/tra-dai-loan.png" alt="Thuần Trà" />
              <p>Loại Thuần Trà</p>
            </div>

            <div class="drink-item" (click)="openDrinksModal('Loại Trà Sữa')">
              <img src="assets/images/tra-sua.png" alt="Trà Sữa" />
              <p>Loại Trà Sữa</p>
            </div>

            <div class="drink-item" (click)="openDrinksModal('Loại Trà Latte')">
              <img src="assets/images/tra-latte.png" alt="Trà Latte" />
              <p>Loại Trà Latte</p>
            </div>

            <div class="drink-item" (click)="openDrinksModal('Thức Uống Hot')">
              <img src="assets/images/cac-mon-hot.png" alt="Thức uống hot" />
              <p>Thức Uống Hot</p>
            </div>

            <div class="drink-item" (click)="openDrinksModal('Thức Uống Mới')">
              <img src="assets/images/thuc-uong-moi.png" alt="Thức uống mới" />
              <p>Thức Uống Mới</p>
            </div>

            <div class="drink-item" (click)="openDrinksModal('Loại Trà Trái Cây')">
              <img src="assets/images/tra-yakult.png" alt="Trà trái cây" />
              <p>Loại Trà Trái Cây</p>
            </div>

            <p class="drink-desc">
              Các dòng thức uống được kết hợp giữa trà nguyên chất với sữa béo cùng nguyên liệu tươi,
              mang đến trải nghiệm tươi mới cho bạn.
            </p>
          </div>
        </section>
      </div>
    </section>

    <!-- HOT MENU -->
    <section class="hot-menu" id="hot-menu">
      <div class="container">
        <h2 class="hot-title">THỬ NGAY MÓN MỚI TẠI CỬA HÀNG</h2>

        <!-- 4 món random từ “Thức Uống Mới” -->
        <div class="product-grid">
          <a
            class="product-card"
            *ngFor="let p of hotMenuItems"
            [routerLink]="['/product']"
            [queryParams]="{ pid: p.id ?? '', name: p.name ?? '' }"
            [attr.aria-label]="p.name"
          >
            <figure>
              <img [src]="normSrc(p.image)" [alt]="p.name" />
            </figure>
            <h3 class="product-name">{{ p.name }}</h3>
          </a>
        </div>

        <div class="actions">
          <a class="btn-outline" routerLink="/menu" [queryParams]="{ category: 'Thức Uống Mới' }">Xem thêm</a>
        </div>

        <a class="promo-banner" routerLink="/blog/blog_1" aria-label="Xem bài viết khuyến mãi Ngô Gia">
          <img src="assets/images/banner_monmoi.png" alt="Khuyến mãi Ngô Gia" />
        </a>
      </div>
    </section>

    <!-- TOP HOT -->
    <section class="top-hot" id="top-hot">
      <div class="container">
        <h2 class="top-hot-title">TOP 9 BÁN CHẠY NHẤT</h2>

        <div class="product-grid" id="top-hot-grid">
          <a
            class="product-card"
            *ngFor="let p of topHotItems"
            [routerLink]="['/product']"
            [queryParams]="{ pid: p.id ?? '', name: p.name ?? '' }"
            [attr.aria-label]="'Xem chi tiết ' + p.name"
          >
            <figure>
              <img [src]="normSrc(p.image)" [alt]="p.name" />
            </figure>
            <div class="card-body">
              <div class="card-meta">
                <span class="star">★</span>
                <span>{{ (p.rating ?? 5) | number:'1.1-1' }}</span>
                <span>•</span>
                <span>{{ getReviewCount(p) }} lượt đánh giá</span>
              </div>
              <h3 class="product-name">{{ p.name }}</h3>
              <div class="price-row">
                <div class="price-col">
                  <div class="line size-line">
                    <span class="label">M</span>
                    <span class="value">{{ priceVN(p.price || 0) }}đ</span>
                  </div>
                  <div class="line vip-line">
                    <span class="label vip">VIP</span>
                    <span class="value">{{ priceVN(vipPrice(p.price || 0)) }}đ</span>
                  </div>
                </div>
                <div class="price-col">
                  <div class="line size-line">
                    <span class="label">L</span>
                    <span class="value">{{ priceVN((p.price || 0) + 3000) }}đ</span>
                  </div>
                  <div class="line vip-line">
                    <span class="label vip">VIP</span>
                    <span class="value">{{ priceVN(vipPrice((p.price || 0) + 3000)) }}đ</span>
                  </div>
                </div>
                <button type="button" class="price-cart" (click)="addToCart($event, p)" [attr.aria-label]="'Thêm ' + p.name + ' vào giỏ'">
                  <img src="assets/icons/Cart2.png" alt="" aria-hidden="true" />
                </button>
              </div>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- ZALO -->
    <section class="zalo-section">
      <div class="zalo-content">
        <div class="zalo-text">
          <h2>
            Liên kết <span class="highlight-blue">Zalo</span><br/> để nhận
            <span class="highlight-yellow">ưu đãi khách hàng VIP</span>
          </h2>
          <p>
            Chỉ cần nhập thông tin, bạn sẽ trở thành khách hàng VIP với ưu đãi giảm <strong>3.000đ</strong> mỗi ly nước tại Ngô Gia!
          </p>
        </div>
        <div class="zalo-qr">
          <img src="assets/icons/zalo.png" alt="QR Zalo Ngô Gia" />
        </div>
      </div>
    </section>

  </div>
</main>

<!-- MODAL -->
<div class="drinks-modal" [class.show]="showDrinksModal" aria-hidden="true">
  <div class="drinks-backdrop" (click)="closeDrinksModal()"></div>

  <div class="drinks-card" role="dialog" aria-modal="true">
    <button class="drinks-close" (click)="closeDrinksModal()" aria-label="Đóng">×</button>

    <a routerLink="/menu" [queryParams]="{ category: getSelectedCategoryName() }" class="drinks-left" [attr.aria-label]="'Xem ' + getSelectedCategoryName() + ' tại menu'">
      <img *ngIf="selectedSlug === 'thuan-tra'" src="assets/images/tra-dai-loan.png" alt="Thuần Trà" />
      <img *ngIf="selectedSlug === 'tra-latte'" src="assets/images/tra-latte.png" alt="Trà Latte" />
      <img *ngIf="selectedSlug === 'tra-sua'" src="assets/images/tra-sua.png" alt="Trà Sữa" />
      <img *ngIf="selectedSlug === 'mon-moi'" src="assets/images/thuc-uong-moi.png" alt="Thức Uống Mới" />
      <img *ngIf="selectedSlug === 'mon-hot'" src="assets/images/cac-mon-hot.png" alt="Thức Uống Hot" />
      <img *ngIf="selectedSlug === 'tra-trai-cay'" src="assets/images/tra-yakult.png" alt="Trà Trái Cây" />
    </a>

    <div class="drinks-right">
      <div class="swiper-button-prev drinks-nav"></div>

      <div class="swiper drinks-swiper" #drinksSwiperEl>
        <div class="swiper-wrapper">
          <div class="swiper-slide" *ngFor="let p of modalItems">
            <a
              class="drink-card"
              [routerLink]="['/product']"
              [queryParams]="{ pid: p.id ?? '', name: p.name ?? '' }"
              [attr.aria-label]="p.name"
              [attr.title]="p.name"
            >
              <div class="drink-thumb">
                <img [src]="normSrc(p.image)" [alt]="p.name" loading="lazy" />
              </div>
              <p>{{ p.name }}</p>
            </a>
          </div>
        </div>
      </div>

      <div class="swiper-button-next drinks-nav"></div>
    </div>
  </div>
</div>